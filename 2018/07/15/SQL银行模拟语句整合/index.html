<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="author" content="宝全哥哥">
    
    
    
    
    
    
    <title>SQL银行模拟语句整合 | DonY15</title>
    <link href=”http://yoursite.com“ rel=”prefetch” />

    <link rel="stylesheet" href="/css/bootstrap.min.css">
<link rel="stylesheet" href="/css/aos.css">
<link rel="stylesheet" href="/css/style.css">
    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/aos.js"></script>
    <script src="/js/highslide/highslide-full.min.js"></script>
    <link rel="stylesheet" href="/js/highslide/highslide.css">
    <style type="text/css">
        @media (max-width: 768px) {
            body {
                background-color: #f0f0f0;
                background: url('/imgs/xsbg.gif');
                background-attachment: fixed;
            }
        }
    </style>
    
    <script src="//cdn1.lncld.net/static/js/3.4.2/av-min.js"></script>
    <script>
      AV.init({
        appId: 'Sd0rIgx60GcgbzBuEgMwUyzG-gzGzoHsz',
        appKey: 'nYP6CNjSvE1TUhTur6M4ldxz'
      })
    </script>
    
    <!--<script type="text/javascript">
      if (document.images) {
        var avatar = new Image();
        avatar.src = '/imgs/avatar.jpg'
        var previews = 'preview1.jpg,preview2.jpg,preview3.jpg,preview4.jpg,preview5.jpg,preview6.jpg,preview7.jpg,preview8.jpg,preview9.jpg,preview10.jpg,preview11.jpg,preview12.jpg,preview13.jpg,preview14.jpg'.split(',')
        var previewsPreLoad = []
        for(var i = 0; i < length; i++) {
          previewsPreLoad.push(new Image())
          previewsPreLoad[previewsPreLoad.length - 1].src = '/imgs/preview' + previews[i]
        }
      }
    </script>-->
		<!--统计-->
			<!--<script src="https://cdn1.lncld.net/static/js/av-min-1.2.1.js"></script>-->
		<!--<script>AV.initialize("Sd0rIgx60GcgbzBuEgMwUyzG-gzGzoHsz", "nYP6CNjSvE1TUhTur6M4ldxz");</script>-->
		<script src="//cdn.jsdelivr.net/npm/leancloud-storage@3.7.3/dist/av-min.js"></script>
		<script src="//cdn.jsdelivr.net/npm/leancloud-realtime@4.1.0/dist/realtime.browser.min.js"></script>
		<script src="//cdn.jsdelivr.net/npm/leancloud-storage@3.7.3/dist/av-live-query-min.js"></script>
		
		<script>
		// 存储服务
		var { Query, User } = AV;
		AV.init('Sd0rIgx60GcgbzBuEgMwUyzG-gzGzoHsz', 'nYP6CNjSvE1TUhTur6M4ldxz');
		// 实时消息服务
		var { Realtime, TextMessage } = AV;
		
		</script>
		
</head>
<body>
    <!-- 背景轮播图功能 -->
    <section class="hidden-xs">
    <ul class="cb-slideshow">
        <li><span>天若</span></li>
        <li><span>有情</span></li>
        <li><span>天亦老</span></li>
        <li><span>我为</span></li>
        <li><span>长者</span></li>
        <li><span>续一秒</span></li>
    </ul>
</section>
    <!-- 欧尼酱功能, 谁用谁知道 -->
    
    <div class="gal-menu gal-dropdown">
    <div class="circle" id="gal">
        <div class="ring">
            <a href="http://yoursite.com" class="menuItem" style="left: 50%; top: 15%;">首页</a>
            
            <a class="menuItem" style="left: 80.3109%; top: 32.5%;">下一页</a>
            
            <a href="/archives" class="menuItem" style="left: 80.3109%; top: 67.5%;">归档</a>
            <a href="/categories" class="menuItem" style="left: 50%; top: 85%;">目录</a>
            <a href="/message" class="menuItem" style="left: 19.6891%; top: 67.5%;">留言板</a>
            
            <a class="menuItem" style="left: 19.6891%; top: 32.5%;">上一页</a>
            
        </div>
        <audio id="audio" src="/imgs/oni.mp3"></audio>
    </div>
</div>
    
    <header class="navbar navbar-inverse" id="gal-header">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed"
                    data-toggle="collapse" data-target=".bs-navbar-collapse"
                    aria-expanded="false">
                <span class="fa fa-lg fa-reorder"></span>
            </button>
            <!--<a href="http://yoursite.com">-->
						<a href="/">
                
                <style>
                    #gal-header .navbar-brand {
                        height: 54px;
                        line-height: 24px;
                        font-size: 28px;
                        opacity: 1;
                        background-color: rgba(0,0,0,0);
                        text-shadow: 0 0 5px #fff,0 0 10px #fff,0 0 15px #fff,0 0 20px #228DFF,0 0 35px #228DFF,0 0 40px #228DFF,0 0 50px #228DFF,0 0 75px #228DFF;
                    }
                </style>
                <!-- 这里使用文字(navbar_text or config.title) -->
                <div class="navbar-brand">DonY15</div>
                
            </a>
        </div>
        <div class="collapse navbar-collapse bs-navbar-collapse">
            <ul class="nav navbar-nav" id="menu-gal">
                
                
                <li class="">
                    <a href="/">
                        <i class="fa fa-home"></i>首页
                    </a>
                </li>
                
                
                
                <li class="">
                    <a href="/archives">
                        <i class="fa fa-archive"></i>归档
                    </a>
                </li>
                
                
                
                
                <li class="dropdown">
                    <!-- TODO 添加hover dropdown效果 -->
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown"
                       aria-haspopup="true" aria-expanded="false" data-hover="dropdown">
                        <i class="fa fa-list"></i>目录
                    </a>
                    <ul class="dropdown-menu">
                        
                        
                        <li>
                            <a href="/categories/Web基础/">Web基础</a>
                        </li>
                        
                        <li>
                            <a href="/categories/组件/">组件</a>
                        </li>
                        
                        <li>
                            <a href="/categories/框架/">框架</a>
                        </li>
                        
                        <li>
                            <a href="/categories/搭建/">搭建</a>
                        </li>
                        
                        <li>
                            <a href="/categories/IDE/">IDE</a>
                        </li>
                        
                        <li>
                            <a href="/categories/Linux基础/">Linux基础</a>
                        </li>
                        
                        <li>
                            <a href="/categories/Spring全家桶/">Spring全家桶</a>
                        </li>
                        
                        <li>
                            <a href="/categories/IO/">IO</a>
                        </li>
                        
                        <li>
                            <a href="/categories/SE基础/">SE基础</a>
                        </li>
                        
                        <li>
                            <a href="/categories/初等数学/">初等数学</a>
                        </li>
                        
                        <li>
                            <a href="/categories/服务器/">服务器</a>
                        </li>
                        
                        <li>
                            <a href="/categories/工具类/">工具类</a>
                        </li>
                        
                        <li>
                            <a href="/categories/SQL/">SQL</a>
                        </li>
                        
                        
                        
                    </ul>
                </li>
                
                
                
                
                
                <li class="">
                    <a href="/tags">
                        <i class="fa fa-tags"></i>标签
                    </a>
                </li>
                
                
                
                
                <li class="">
                    <a href="/message">
                        <i class="fa fa-user"></i>留言板
                    </a>
                </li>
                
                
            </ul>
        </div>
    </div>
</header>
    <div id="gal-body">
        <div class="container">
            <div class="row">
                <div class="col-md-8 gal-right" id="mainstay">
                    
<article class="article well article-body" id="article">
    <div class="breadcrumb">
        <i class="fa fa-home"></i>
       
				<a href="/">DonY15</a>
        >
        <span>SQL银行模拟语句整合</span>
    </div>
    <!-- 大型设备详细文章 -->
    <div class="hidden-xs">
        <div class="title-article">
            <h1>
                <a href="/2018/07/15/SQL银行模拟语句整合/">SQL银行模拟语句整合</a>
            </h1>
        </div>
        <div class="tag-article">
            
            <span class="label label-gal">
                <i class="fa fa-calendar"></i> 2018-07-15
            </span>
            
            <span class="label label-gal">
                <i class="fa fa-eye"></i>
            </span>
            
        </div>
    </div>
    <!-- 小型设备详细文章 -->
    <div class="visible-xs">
        <center>
            <div class="title-article">
                <h4>
                    <a href="/2018/07/15/SQL银行模拟语句整合/">SQL银行模拟语句整合</a>
                </h4>
            </div>
            <p>
                <i class="fa fa-calendar"></i> 2018-07-15
            </p>
            <p>
                
                
                <i class="fa fa-eye"></i>
                
            </p>
        </center>
    </div>
    <div class="content-article">
        <h2 id="SQL银行模拟语句整合"><a href="#SQL银行模拟语句整合" class="headerlink" title="SQL银行模拟语句整合"></a>SQL银行模拟语句整合</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br></pre></td><td class="code"><pre><span class="line">--创建表空间</span><br><span class="line">create tablespace bankspace datafile &apos;E:\bank\bank.dbf&apos; size 10m autoextend on;</span><br><span class="line">--创建用户bankuser</span><br><span class="line">create user bankuser identified by bankuser default tablespace bankspace;</span><br><span class="line">--</span><br><span class="line">drop table tradeinfo;</span><br><span class="line">drop table userInfo;</span><br><span class="line">drop table cardInfo;</span><br><span class="line">drop table Deposit;</span><br><span class="line">--为用户授权</span><br><span class="line">grant connect,resource to bankuser;</span><br><span class="line">--创建用户信息表</span><br><span class="line">create table userInfo --用户信息表</span><br><span class="line">(</span><br><span class="line">customerID number not null,</span><br><span class="line">customerName varchar2(8),</span><br><span class="line">PID varchar2(18) not null,</span><br><span class="line">telephone varchar2(20) not null,</span><br><span class="line">address varchar(50)</span><br><span class="line">);</span><br><span class="line">--创建银行卡信息表</span><br><span class="line">create table cardinfo(</span><br><span class="line">cardid char(19) NOT NULL,</span><br><span class="line">curid varchar(10)NOT NULL,--币种</span><br><span class="line">savingid number NOT NULL,</span><br><span class="line">openDate date NOT NULL,</span><br><span class="line">openMoney number NOT NULL,</span><br><span class="line">balance number NOT NULL,</span><br><span class="line">pass char(6)NOT NULL,</span><br><span class="line">isreportloss number(1)NOT NULL,--判断卡是否挂失</span><br><span class="line">customerID number NOT NULL</span><br><span class="line">);</span><br><span class="line">select * from userInfo;</span><br><span class="line">--创建交易信息表</span><br><span class="line">create table tradeInfo </span><br><span class="line">(</span><br><span class="line">tradeDate DATE NOT NULL,</span><br><span class="line">tradeType Char(4) NOT NULL,</span><br><span class="line">cardID  CHAR(19) NOT NULL,</span><br><span class="line">tradeMoney NUMBER NOT NULL,</span><br><span class="line">remark LONG</span><br><span class="line">);</span><br><span class="line">select * from tradeInfo;</span><br><span class="line">--创建存款类型表</span><br><span class="line">create table deposit (</span><br><span class="line">savingID NUMBER NOT NULL,</span><br><span class="line">savingName varchar(20)NOT NULL,</span><br><span class="line">descrip varchar(50)</span><br><span class="line">);</span><br><span class="line">/*为deposit表添加约束*/</span><br><span class="line">alter table deposit add constraint pa_savingID</span><br><span class="line">primary key(savingid);</span><br><span class="line">/*为userInfo添加约束*/</span><br><span class="line">--主键</span><br><span class="line">alter table userinfo add constraint pk_customerID</span><br><span class="line">primary key(customerID);</span><br><span class="line">--check约束，身份证号长度</span><br><span class="line">alter table userinfo add constraint ck_pid</span><br><span class="line">check(length(pid)=18 or length(pid)=15);</span><br><span class="line">--unique唯一约束，身份证号唯一</span><br><span class="line">alter table userinfo add constraint uq_pid unique(pid);</span><br><span class="line">--check约束，电话号码</span><br><span class="line">alter table userinfo add constraint ck_telephone</span><br><span class="line">check(regexp_like(telephone,&apos;(^\d&#123;3,4&#125;-\d&#123;7,8&#125;$)|(^\d&#123;11&#125;$)&apos;));</span><br><span class="line">--查看创建的约束</span><br><span class="line">select * from user_constraints where table_name=&apos;DEPOSIT&apos;;</span><br><span class="line">select * from user_constraints where table_name=&apos;USERINFO&apos;;</span><br><span class="line">/*为cardInfo添加约束*/</span><br><span class="line">--主键</span><br><span class="line">alter table cardinfo add constraint pk_cardid</span><br><span class="line">primary key(cardid);</span><br><span class="line">--check约束，卡号</span><br><span class="line">alter table cardinfo add constraint ck_cardID</span><br><span class="line">check(regexp_like(cardid,&apos;1010 3576 \d&#123;4&#125; \d&#123;4&#125;&apos;));</span><br><span class="line">--修改表中字段</span><br><span class="line">alter table cardInfo modify (curid varchar(10) default &apos;RMB&apos;);</span><br><span class="line">alter table cardInfo modify (opendate varchar(10) default sysdate);</span><br><span class="line">--预存金额大于等于1</span><br><span class="line">alter table cardinfo add constraint ck_openmoney</span><br><span class="line">check(openmoney&gt;=1);</span><br><span class="line">--check 约束 ，预存金额大于等于1</span><br><span class="line">alter table cardinfo add constraint ck_balance</span><br><span class="line">check(balance&gt;=1);</span><br><span class="line">--密码检查约束，密码必须是六位数字</span><br><span class="line">alter table cardinfo add constraint ck_pass</span><br><span class="line">check(regexp_like(pass,&apos;^[0-9]&#123;6&#125;$&apos;));</span><br><span class="line">--密码默认6个8</span><br><span class="line">alter table cardinfo modify (pass char(6) default &apos;888888&apos;);</span><br><span class="line">--是否挂失默认值0</span><br><span class="line">alter table cardinfo modify (isreportloss number(1) default 0);</span><br><span class="line">--外键约束</span><br><span class="line">alter table cardinfo add constraint fk_customerid</span><br><span class="line">foreign key(customerid)references userInfo(customerid);</span><br><span class="line">--外键约束</span><br><span class="line">alter table cardinfo add constraint fk_savingid</span><br><span class="line">foreign key(savingid)references deposit(savingid);</span><br><span class="line">/*为tradeinfo 表添加约束*/</span><br><span class="line">--交易类型(存入、支取)</span><br><span class="line">alter table tradeinfo add constraint ck_tradetype</span><br><span class="line">check(tradetype in (&apos;存入&apos;,&apos;支取&apos;));</span><br><span class="line">--外键</span><br><span class="line">alter table tradeinfo add constraint fk_cardID</span><br><span class="line">foreign key(cardid)references cardInfo(cardId);</span><br><span class="line">--交易金额大于0</span><br><span class="line">alter table tradeinfo add constraint ck_tradeMoney</span><br><span class="line">check(tradeMoney&gt;0);</span><br><span class="line">--交易时间</span><br><span class="line">alter table tradeinfo modify (tradeDate date default sysdate);</span><br><span class="line">/***************************************************************************************************/</span><br><span class="line">/*                                        插入测试数据                                              */</span><br><span class="line">/***************************************************************************************************/</span><br><span class="line">/*</span><br><span class="line"> ==========================</span><br><span class="line"> 测试数据</span><br><span class="line"> ==========================</span><br><span class="line"> */</span><br><span class="line">--存款类型</span><br><span class="line">INSERT INTO deposit (savingID,savingName,descrip) VALUES (1,&apos;活期&apos;,&apos;按存款日结算利息&apos;);</span><br><span class="line">INSERT INTO deposit (savingID,savingName,descrip) VALUES (2,&apos;定期一年&apos;,&apos;存款期是1年&apos;);</span><br><span class="line">INSERT INTO deposit (savingID,savingName,descrip) VALUES (3,&apos;定期二年&apos;,&apos;存款期是2年&apos;);</span><br><span class="line">INSERT INTO deposit (savingID,savingName,descrip) VALUES (4,&apos;定期三年&apos;,&apos;存款期是3年&apos;);</span><br><span class="line">INSERT INTO deposit (savingID,savingName) VALUES (5,&apos;定活两便&apos;);</span><br><span class="line">INSERT INTO deposit (savingID,savingName) VALUES (6,&apos;通知&apos;);</span><br><span class="line">INSERT INTO deposit (savingID,savingName,descrip) VALUES (7,&apos;零存整取一年&apos;,&apos;存款期是1年&apos;);</span><br><span class="line">INSERT INTO deposit (savingID,savingName,descrip) VALUES (8,&apos;零存整取二年&apos;,&apos;存款期是2年&apos;);</span><br><span class="line">INSERT INTO deposit (savingID,savingName,descrip) VALUES (9,&apos;零存整取三年&apos;,&apos;存款期是3年&apos;);</span><br><span class="line">INSERT INTO deposit (savingID,savingName,descrip) VALUES (10,&apos;存本取息五年&apos;,&apos;按月支取利息&apos;);</span><br><span class="line">SELECT * FROM DEPOSIT;</span><br><span class="line">SELECT * FROM userinfo;</span><br><span class="line">SELECT * FROM cardinfo;</span><br><span class="line">SELECT * FROM tradeinfo;</span><br><span class="line">INSERT INTO userInfo(customerID,customerName,PID,telephone,address )</span><br><span class="line">     VALUES(1,&apos;张三&apos;,&apos;123456789012345&apos;,&apos;010-67898978&apos;,&apos;北京海淀&apos;);</span><br><span class="line">INSERT INTO cardInfo(cardID,savingID,openMoney,balance,customerID)</span><br><span class="line">     VALUES(&apos;1010 3576 1234 5678&apos;,1,1000,1000,1);</span><br><span class="line">INSERT INTO userInfo(customerID,customerName,PID,telephone)</span><br><span class="line">     VALUES(2,&apos;李四&apos;,&apos;321245678912345678&apos;,&apos;0478-44443333&apos;);</span><br><span class="line">INSERT INTO cardInfo(cardID,savingID,openMoney,balance,customerID)</span><br><span class="line">     VALUES(&apos;1010 3576 1212 1134&apos;,2,1,1,2);</span><br><span class="line">INSERT INTO userInfo(customerID,customerName,PID,telephone)</span><br><span class="line">     VALUES(3,&apos;王五&apos;,&apos;567891234532124670&apos;,&apos;010-44443333&apos;);</span><br><span class="line">INSERT INTO cardInfo(cardID,savingID,openMoney,balance,customerID)</span><br><span class="line">     VALUES(&apos;1010 3576 1212 1130&apos;,2,1601,1601,3);</span><br><span class="line">INSERT INTO userInfo(customerID,customerName,PID,telephone)</span><br><span class="line">     VALUES(4,&apos;丁六&apos;,&apos;567891321242345618&apos;,&apos;0752-43345543&apos;);</span><br><span class="line">INSERT INTO cardInfo(cardID,savingID,openMoney,balance,customerID)</span><br><span class="line">     VALUES(&apos;1010 3576 1212 1004&apos;,2,1,1,4);</span><br><span class="line">/*</span><br><span class="line">张三的卡号（1010 3576 1234 5678）取款900元，李四的卡号（1010 3576 1212 1134）存款5000元，要求保存交易记录，以便客户查询和银行业务统计。</span><br><span class="line">说明：当存钱或取钱（如300元）时候，会往交易信息表（tradeInfo）中添加一条交易记录，</span><br><span class="line">      同时应更新银行卡信息表（cardInfo）中的现有余额（如增加或减少500元）</span><br><span class="line">*/</span><br><span class="line">/*--------------交易信息表插入交易记录--------------------------*/</span><br><span class="line">INSERT INTO tradeInfo(tradeType,cardID,tradeMoney) </span><br><span class="line">      VALUES(&apos;支取&apos;,&apos;1010 3576 1234 5678&apos;,900)  ;</span><br><span class="line">/*-------------更新银行卡信息表中的现有余额-------------------*/</span><br><span class="line">UPDATE cardInfo SET balance=balance-900 WHERE cardID=&apos;1010 3576 1234 5678&apos;;</span><br><span class="line">/*--------------交易信息表插入交易记录--------------------------*/</span><br><span class="line">INSERT INTO tradeInfo(tradeType,cardID,tradeMoney) </span><br><span class="line">      VALUES(&apos;存入&apos;,&apos;1010 3576 1212 1130&apos;,300)  ;</span><br><span class="line">/*-------------更新银行卡信息表中的现有余额-------------------*/</span><br><span class="line">UPDATE cardInfo SET balance=balance+300 WHERE cardID=&apos;1010 3576 1212 1130&apos;;</span><br><span class="line">/*--------------交易信息表插入交易记录--------------------------*/</span><br><span class="line">INSERT INTO tradeInfo(tradeType,cardID,tradeMoney) </span><br><span class="line">      VALUES(&apos;存入&apos;,&apos;1010 3576 1212 1004&apos;,1000)  ;</span><br><span class="line">/*-------------更新银行卡信息表中的现有余额-------------------*/</span><br><span class="line">UPDATE cardInfo SET balance=balance+1000 WHERE cardID=&apos;1010 3576 1212 1004&apos;;</span><br><span class="line">/*--------------交易信息表插入交易记录--------------------------*/</span><br><span class="line">INSERT INTO tradeInfo(tradeType,cardID,tradeMoney) </span><br><span class="line">      VALUES(&apos;支取&apos;,&apos;1010 3576 1212 1130&apos;,1900)  ;</span><br><span class="line">/*-------------更新银行卡信息表中的现有余额--报错-----------------*/</span><br><span class="line">UPDATE cardInfo SET balance=balance-1900 WHERE cardID=&apos;1010 3576 1212 1130&apos;;</span><br><span class="line">/*--------------交易信息表插入交易记录--------------------------*/</span><br><span class="line">INSERT INTO tradeInfo(tradeType,cardID,tradeMoney) </span><br><span class="line">      VALUES(&apos;存入&apos;,&apos;1010 3576 1212 1134&apos;,5000)   ;</span><br><span class="line">      </span><br><span class="line">      --INSERT INTO tradeInfo(tradeType,cardID,tradeMoney,Tradedate) </span><br><span class="line">      --VALUES(&apos;存入&apos;,&apos;1010 3576 1212 1134&apos;,5000,to_date(&apos;2014-06-01&apos;,&apos;yyyy-mm-dd&apos;))   ;</span><br><span class="line">/*-------------更新银行卡信息表中的现有余额-------------------*/</span><br><span class="line">UPDATE cardInfo SET balance=balance+5000 WHERE cardID=&apos;1010 3576 1212 1134&apos;;</span><br><span class="line">commit;</span><br><span class="line">/*--------检查测试数据是否正确---------*/</span><br><span class="line">SELECT * FROM cardInfo;</span><br><span class="line">SELECT * FROM tradeInfo;</span><br><span class="line">SELECT * FROM userInfo;</span><br><span class="line">--删除数据</span><br><span class="line">delete from tradeInfo;</span><br><span class="line">delete from cardInfo;</span><br><span class="line">delete from userInfo;</span><br><span class="line">delete from DEPOSIT;</span><br><span class="line">/*</span><br><span class="line">取本周第一天</span><br><span class="line">select trunc (sysdate,&apos;DAY&apos;) from dual;</span><br><span class="line">*/</span><br><span class="line">/*---------修改密码-----*/</span><br><span class="line">--1.张三（卡号为1010 3576 1234 5678）修改银行卡密码为123456</span><br><span class="line">--2.李四（卡号为1010 3576 1212 1134）修改银行卡密码为123123</span><br><span class="line">update cardInfo set pass=&apos;123456&apos; WHERE cardID=&apos;1010 3576 1234 5678&apos; ;</span><br><span class="line">update cardInfo set pass=&apos;123123&apos; WHERE cardID=&apos;1010 3576 1212 1134&apos; ;</span><br><span class="line">--查询账户信息</span><br><span class="line">SELECT * FROM cardInfo;</span><br><span class="line">/*---------挂失帐号---------*/</span><br><span class="line">--李四（卡号为1010 3576 1212 1134）因银行卡丢失，申请挂失</span><br><span class="line">update cardInfo set IsReportLoss=1 WHERE cardID=&apos;1010 3576 1212 1134&apos; ;</span><br><span class="line">SELECT * FROM cardInfo;</span><br><span class="line">--查看修改密码和挂失结果</span><br><span class="line">SELECT cardid 卡号,curID 货币,savingName 储蓄种类,opendate 开户日期,openmoney 开户金额,balance 余额,pass 密码,</span><br><span class="line">    case IsReportLoss WHEN 1 THEN &apos;挂失&apos;  WHEN 0 THEN &apos;未挂失&apos; ELSE NULL end 是否挂失, </span><br><span class="line">    customerName 客户姓名</span><br><span class="line">FROM CardInfo, Deposit, UserInfo</span><br><span class="line">WHERE CardInfo.savingID=Deposit.savingID and CardInfo.customerID = UserInfo.customerID;</span><br><span class="line">/*--------统计银行的资金流通余额和盈利结算------------------------------*/</span><br><span class="line">--统计说明:存款代表资金流入,取款代表资金.假定存款利率为千分之3,贷款利率为千分之8</span><br><span class="line">/*--单一货币RMB--*/</span><br><span class="line">DECLARE </span><br><span class="line">    v_inMoney number;</span><br><span class="line">    v_outMoney number;</span><br><span class="line">    v_profit number;</span><br><span class="line">begin</span><br><span class="line">    --SELECT * FROM tradeInfo </span><br><span class="line">    SELECT sum(tradeMoney) into v_inMoney FROM tradeInfo WHERE (tradeType=&apos;存入&apos;);</span><br><span class="line">    SELECT sum(tradeMoney) into v_outMoney FROM tradeInfo WHERE (tradeType=&apos;支取&apos;);</span><br><span class="line">    dbms_output.put_line(&apos;银行流通余额总计为:&apos;||to_char(v_inMoney-v_outMoney)||&apos;RMB&apos;);</span><br><span class="line">    v_profit:=v_outMoney*0.008-v_inMoney*0.003;</span><br><span class="line">    dbms_output.put_line(&apos;盈利结算为:&apos;||to_char(v_profit)||&apos;RMB&apos;);</span><br><span class="line">end;</span><br><span class="line">/*--------查询本周开户的卡号,显示该卡相关信息-----------------*/</span><br><span class="line">SELECT c.cardID 卡号,u.customerName 姓名,c.curID 货币,d.savingName 存款类型,c.openDate 开户日期,c.openMoney 开户金额,c.balance 存款余额,</span><br><span class="line">       CASE c.IsReportLoss WHEN 0 THEN &apos;正常账户&apos;</span><br><span class="line">                           WHEN 1 THEN &apos;挂失账户&apos;</span><br><span class="line">                           ELSE NULL</span><br><span class="line">       END 账户状态</span><br><span class="line">FROM cardInfo c INNER JOIN userInfo u ON (c.customerID = u.customerID)</span><br><span class="line">INNER JOIN Deposit d ON (c.savingID = d.savingID )</span><br><span class="line">WHERE  openDate between trunc(sysdate,&apos;DAY&apos;) and trunc(sysdate,&apos;DAY&apos;)+6</span><br><span class="line">/*---------查询本月交易金额最高的卡号----------------------*/</span><br><span class="line">SELECT * FROM tradeInfo;</span><br><span class="line">SELECT DISTINCT cardID </span><br><span class="line">FROM tradeInfo </span><br><span class="line">WHERE  tradeMoney=</span><br><span class="line">    (SELECT Max(tradeMoney) FROM tradeInfo</span><br><span class="line">     WHERE to_char(tradeDate,&apos;yyyy-mm&apos;)=to_char(sysdate,&apos;yyyy-mm&apos;));</span><br><span class="line">   </span><br><span class="line">/*---------查询挂失帐号的客户信息---------------------*/</span><br><span class="line">SELECT customerName as 客户姓名,telephone as 联系电话 FROM userInfo </span><br><span class="line">    WHERE customerID IN (SELECT customerID FROM cardInfo WHERE IsReportLoss=1);</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">/*------催款提醒：例如某种业务的需要，每个月末，如果发现用户帐上余额少于200元，将致电催款。---*/</span><br><span class="line">SELECT customerName as 客户姓名,telephone as 联系电话,balance as 存款余额 </span><br><span class="line">FROM userInfo INNER JOIN cardInfo ON  userInfo.customerID=cardInfo.customerID </span><br><span class="line">WHERE balance&lt;200;</span><br><span class="line">/*视图查询*/</span><br><span class="line">--1.创建视图：为了向客户显示信息友好,查询各表要求字段全为中文字段名。</span><br><span class="line">create or replace VIEW vw_userInfo  --客户信息表视图</span><br><span class="line">  AS </span><br><span class="line">    select customerID as 客户编号,customerName as 开户名, PID as 身份证号,</span><br><span class="line">        telephone as 电话号码,address as 居住地址  from userInfo;</span><br><span class="line">--使用视图</span><br><span class="line">SELECT * FROM vw_userInfo;</span><br><span class="line">--2.创建视图：查询银行卡信息</span><br><span class="line">create or replace VIEW vw_cardInfo  --银行卡信息表视图</span><br><span class="line">  AS </span><br><span class="line">    select c.cardID as 卡号,u.customerName as 客户,c.curID as 货币种类, d.savingName as 存款类型,c.openDate as 开户日期,</span><br><span class="line">       c.balance as 余额,c.pass 密码,</span><br><span class="line">       case c.IsReportLoss when 0 then &apos;正常&apos;</span><br><span class="line">                           when 1 then &apos;挂失&apos;</span><br><span class="line">       end as 是否挂失</span><br><span class="line">    from cardInfo c, deposit d,userinfo u</span><br><span class="line">    where c.savingID=d.savingID and c.customerID=u.customerID;</span><br><span class="line">--使用视图</span><br><span class="line">SELECT * FROM vw_cardInfo;</span><br><span class="line">SELECT 客户,余额 FROM vw_cardInfo where 客户=&apos;张三&apos;;</span><br><span class="line">--3.创建视图：查看交易信息</span><br><span class="line">create VIEW vw_tradeInfo  --交易信息表视图</span><br><span class="line">  AS </span><br><span class="line">    select tradeDate as 交易日期,tradeType as 交易类型, cardID as 卡号,tradeMoney as 交易金额,</span><br><span class="line">      remark as 备注  from tradeInfo ;</span><br><span class="line">--使用视图</span><br><span class="line">SELECT * FROM vw_tradeInfo;</span><br><span class="line">--4.根据客户登录名（采用实名制访问银行系统）查询该客户帐户信息的视图</span><br><span class="line">/*trim去掉前后空格*/</span><br><span class="line">create or replace VIEW vw_oneUserInfo  </span><br><span class="line">  AS </span><br><span class="line">     select customerID as 客户编号,customerName as 开户名, PID as 身份证号,</span><br><span class="line">        telephone as 电话号码,address as 居住地址  </span><br><span class="line">     from userInfo</span><br><span class="line">     where UPPER(TRIM(customerName)) in (select UPPER(TRIM(username)) from user_users);</span><br><span class="line">select * from user_users;</span><br><span class="line">--使用视图</span><br><span class="line">select * from vw_oneUserInfo;</span><br><span class="line">/*</span><br><span class="line">存储过程</span><br><span class="line">*/</span><br><span class="line">select * from tradeinfo;</span><br><span class="line">select * from cardinfo;</span><br><span class="line">/*--1.取钱或存钱的存储过程*/</span><br><span class="line">create or replace procedure usp_takeMoney </span><br><span class="line">  (v_card char, --卡号</span><br><span class="line">  v_m number,  --存取金额</span><br><span class="line">  v_type char,  --存取类型</span><br><span class="line">  v_inputPass char default NULL) --密码</span><br><span class="line">as</span><br><span class="line">    v1 number(1);  --临时变量</span><br><span class="line">    v_mybalance  number; --余额</span><br><span class="line">begin</span><br><span class="line">    dbms_output.put_line(&apos;交易正进行,请稍后......&apos;);</span><br><span class="line">    if (v_type=&apos;支取&apos;) then</span><br><span class="line">       SELECT 1 into v1 FROM cardInfo WHERE cardID=v_card and pass=v_inputPass;</span><br><span class="line">    end if;</span><br><span class="line">    SELECT balance into v_mybalance </span><br><span class="line">    FROM cardInfo </span><br><span class="line">    WHERE cardID=v_card;</span><br><span class="line">    if (v_type=&apos;支取&apos;) then</span><br><span class="line">       if (v_mybalance&gt;=v_m+1) then</span><br><span class="line">           update cardInfo set balance=balance-v_m WHERE cardID=v_Card;</span><br><span class="line">       else</span><br><span class="line">            dbms_output.put_line(&apos;卡号&apos;||v_card||&apos;  余额：&apos;||to_char(v_mybalance));</span><br><span class="line">            raise_application_error(-20000,&apos;交易失败！余额不足！&apos;);</span><br><span class="line">        end if;</span><br><span class="line">    else</span><br><span class="line">         update cardInfo set balance=balance+v_m WHERE cardID=v_card;</span><br><span class="line">    end if;</span><br><span class="line">    dbms_output.put_line(&apos;交易成功！交易金额：&apos;||to_char(v_m));</span><br><span class="line">    SELECT balance into v_mybalance FROM cardInfo WHERE cardID=v_card;</span><br><span class="line">    dbms_output.put_line(&apos;卡号&apos;||v_card||&apos;  余额：&apos;||to_char(v_mybalance)); </span><br><span class="line">    INSERT INTO tradeInfo(tradeType,cardID,tradeMoney) VALUES(v_type,v_card,v_m);</span><br><span class="line">    commit;</span><br><span class="line">exception</span><br><span class="line">   when no_data_found then</span><br><span class="line">      raise_application_error(-20001,&apos;卡号或密码错误!&apos;);</span><br><span class="line">end;</span><br><span class="line">--调用存储过程取钱或存钱 张三取300，</span><br><span class="line"> --现实中的取款机依靠读卡器读出张三的卡号,这里根据张三的名字查出考号来模拟</span><br><span class="line"> </span><br><span class="line"> DECLARE</span><br><span class="line">   emp_20000 EXCEPTION;</span><br><span class="line">   PRAGMA EXCEPTION_INIT(emp_20000, -20000);</span><br><span class="line">   emp_20001 EXCEPTION;</span><br><span class="line">   PRAGMA EXCEPTION_INIT(emp_20001, -20001);</span><br><span class="line">   v_card char(19);</span><br><span class="line">BEGIN</span><br><span class="line">    select cardID into v_card </span><br><span class="line">    from cardInfo Inner Join userInfo ON cardInfo.customerID=userInfo.customerID </span><br><span class="line">    where customerName=&apos;张三&apos;;</span><br><span class="line">    usp_takeMoney(v_card,300 ,&apos;支取&apos;,&apos;123456&apos;);</span><br><span class="line">EXCEPTION</span><br><span class="line">   WHEN emp_20000 THEN</span><br><span class="line">      DBMS_OUTPUT.PUT_LINE(&apos;交易失败！余额不足！&apos;);</span><br><span class="line">      rollback;</span><br><span class="line">   WHEN emp_20001 THEN</span><br><span class="line">      DBMS_OUTPUT.PUT_LINE(&apos;密码错误!&apos;);</span><br><span class="line">      rollback;</span><br><span class="line">   WHEN no_data_found THEN</span><br><span class="line">      DBMS_OUTPUT.PUT_LINE(&apos;用户名不存在!&apos;);      </span><br><span class="line">      rollback;</span><br><span class="line">   WHEN OTHERS THEN</span><br><span class="line">      DBMS_OUTPUT.PUT_LINE(&apos;出现了其他异常错误&apos;);</span><br><span class="line">      rollback;</span><br><span class="line">END;</span><br><span class="line">--调用存储过程，李四存500</span><br><span class="line"> </span><br><span class="line">DECLARE</span><br><span class="line">   emp_20000 EXCEPTION;</span><br><span class="line">   PRAGMA EXCEPTION_INIT(emp_20000, -20000);</span><br><span class="line">   emp_20001 EXCEPTION;</span><br><span class="line">   PRAGMA EXCEPTION_INIT(emp_20001, -20001);</span><br><span class="line">   v_card char(19);</span><br><span class="line">BEGIN</span><br><span class="line">    select cardID into v_card </span><br><span class="line">    from cardInfo Inner Join userInfo ON cardInfo.customerID=userInfo.customerID </span><br><span class="line">    where customerName=&apos;李四&apos;;</span><br><span class="line">    usp_takeMoney(v_card,500 ,&apos;存入&apos;);</span><br><span class="line">EXCEPTION</span><br><span class="line">   WHEN emp_20000 THEN</span><br><span class="line">      DBMS_OUTPUT.PUT_LINE(&apos;交易失败！余额不足！&apos;);</span><br><span class="line">      rollback;</span><br><span class="line">   WHEN emp_20001 THEN</span><br><span class="line">      DBMS_OUTPUT.PUT_LINE(&apos;密码错误!&apos;);</span><br><span class="line">      rollback;</span><br><span class="line">   WHEN OTHERS THEN</span><br><span class="line">      DBMS_OUTPUT.PUT_LINE(&apos;出现了其他异常错误&apos;);</span><br><span class="line">      rollback;</span><br><span class="line">END;</span><br><span class="line">select * from vw_cardInfo;</span><br><span class="line">select * from vw_tradeInfo;</span><br><span class="line">/*--2.产生随机卡号的存储过程(dbms_random包来实现) --*/</span><br><span class="line">create or replace procedure usp_randCardID(v_randCardID OUT char)</span><br><span class="line">AS</span><br><span class="line">    v_r number(8);</span><br><span class="line">BEGIN</span><br><span class="line">  v_r:=round(dbms_random.value(10000000,99999999));--产生这个范围(10000000,99999999)的随机数</span><br><span class="line">  v_randCardID:=&apos;1010 3576 &apos;||substr(v_r,1,4)||&apos; &apos;||substr(v_r,5,8);--四位一空格</span><br><span class="line">end;</span><br><span class="line">--测试产生随机卡号</span><br><span class="line">DECLARE </span><br><span class="line">    v_mycardID char(19) ;</span><br><span class="line">BEGIN</span><br><span class="line">    usp_randCardID(v_mycardID);</span><br><span class="line">    dbms_output.put_line(&apos;产生的随机卡号为：&apos;||v_mycardID);</span><br><span class="line">END;</span><br><span class="line">/*--3.开户的存储过程--*/</span><br><span class="line">select * from userInfo;</span><br><span class="line">CREATE SEQUENCE seq_customerID</span><br><span class="line">        START WITH 10 </span><br><span class="line">        INCREMENT BY 1</span><br><span class="line">        NOMAXVALUE </span><br><span class="line">        NOCYCLE</span><br><span class="line">        CACHE 30;</span><br><span class="line">create or replace procedure usp_openAccount</span><br><span class="line">( v_customerName char,</span><br><span class="line">  v_PID char,</span><br><span class="line">  v_telephone char,</span><br><span class="line">  v_openMoney number,</span><br><span class="line">  v_savingName char,</span><br><span class="line">  v_address varchar default &apos;&apos; )</span><br><span class="line">AS</span><br><span class="line">   v_mycardID char(19);</span><br><span class="line">   v_cur_customerID int;</span><br><span class="line">   v_savingID int ;</span><br><span class="line">   v1 int;</span><br><span class="line"> begin</span><br><span class="line">   --调用产生随机卡号的存储过程获得随机卡号</span><br><span class="line">   usp_randCardID (v_mycardID);</span><br><span class="line">   SELECT count(*) into v1 FROM cardInfo WHERE cardID=v_mycardID;</span><br><span class="line">   while (v1&lt;&gt;0) loop</span><br><span class="line">      usp_randCardID (v_mycardID);</span><br><span class="line">      SELECT count(*) into v1 FROM cardInfo WHERE cardID=v_mycardID;            </span><br><span class="line">   end loop;</span><br><span class="line">   dbms_output.put_line(&apos;尊敬的客户,开户成功!系统为您产生的随机卡号为:&apos;||v_mycardID);</span><br><span class="line">   dbms_output.put_line(&apos;开户日期&apos;||to_char(sysdate,&apos;yyyy-mm-dd&apos;)||&apos;  开户金额:&apos;||to_char(v_openMoney));</span><br><span class="line">   select count(*) into v1 from userInfo where PID=v_PID;</span><br><span class="line">   if v1=0 then</span><br><span class="line">         INSERT INTO userInfo(customerID,customerName,PID,telephone,address )</span><br><span class="line">          VALUES(seq_customerID.nextval,v_customerName,v_PID,v_telephone,v_address) ;   </span><br><span class="line">   end if;  </span><br><span class="line">   SELECT savingID into v_savingID FROM deposit WHERE savingName =v_savingName;</span><br><span class="line">   select customerID into v_cur_customerID from userInfo where PID=v_PID;</span><br><span class="line">   INSERT INTO cardInfo(cardID,savingID,openMoney,balance,customerID)</span><br><span class="line">         VALUES(v_mycardID,v_savingID,v_openMoney,v_openMoney,v_cur_customerID);</span><br><span class="line">exception</span><br><span class="line">    when no_data_found then</span><br><span class="line">        raise_application_error(-20000,&apos;存款类型不正确,请重新输入!&apos;);</span><br><span class="line">    when others then</span><br><span class="line">        raise_application_error(-20001,&apos;其他错误,请重新输入!&apos;);</span><br><span class="line">end;</span><br><span class="line">--调用存储过程重新开户</span><br><span class="line">begin</span><br><span class="line">    usp_openAccount (&apos;王老五&apos;,&apos;334456889012678&apos;,&apos;2222-63598978&apos;,1000,&apos;活期&apos;,&apos;河南新乡&apos;);</span><br><span class="line">    commit;</span><br><span class="line">end;</span><br><span class="line">--EXEC usp_openAccount(&apos;赵小二&apos;,&apos;213445678912342222&apos;,&apos;0760-44446666&apos;,1,&apos;定期&apos;);</span><br><span class="line">select * from vw_userInfo;</span><br><span class="line">select * from vw_cardInfo;</span><br><span class="line">select * from vw_tradeInfo;</span><br><span class="line">GO</span><br><span class="line">/*--4.输入页数和每页显示的记录数，实现分页显示*/</span><br><span class="line">--DROP PROCEDURE usp_pagingDisplay</span><br><span class="line">SELECT tradeDate 交易日期,tradeType 交易类型,cardID 卡号,trademoney 交易金额 </span><br><span class="line">FROM (SELECT t.*,rownum rn FROM (SELECT * FROM tradeInfo ) t)</span><br><span class="line">WHERE rn&gt;=4 and rn&lt;=6;</span><br><span class="line">CREATE OR REPLACE PROCEDURE usp_pagingDisplay</span><br><span class="line">( v_page number:= 1, </span><br><span class="line">  v_records number:= 10)</span><br><span class="line">AS</span><br><span class="line">  v_rec1 number;</span><br><span class="line">  v_rec2 number;</span><br><span class="line">  v_statement varchar2(200);</span><br><span class="line">  TYPE cursor_type IS REF CURSOR;</span><br><span class="line">  --声明一个游标变量</span><br><span class="line">  c1 CURSOR_TYPE;</span><br><span class="line">  v_trade tradeinfo%rowtype;</span><br><span class="line">begin</span><br><span class="line">  v_rec1:= (v_page-1)*v_records+1;</span><br><span class="line">  v_rec2:= v_page*v_records;</span><br><span class="line">  v_statement:=&apos;SELECT  tradeDate,tradeType,cardID,trademoney,REMARK &apos;;</span><br><span class="line">  --SQL语句拼接</span><br><span class="line">  v_statement:=v_statement||&apos;FROM (SELECT t.*,rownum rn FROM (SELECT * FROM tradeInfo ) t) &apos;;</span><br><span class="line">  v_statement:=v_statement||&apos;WHERE rn&gt;=&apos;||v_rec1||&apos; and rn&lt;=&apos;||v_rec2;</span><br><span class="line">  --dbms_output.put_line(v_statement);</span><br><span class="line">  dbms_output.put_line(&apos;交易日期   交易类型             卡号           交易金额 &apos;);</span><br><span class="line">  dbms_output.put_line(&apos;---------------------------------------------------------&apos;);</span><br><span class="line">  open c1 for v_statement;</span><br><span class="line">  LOOP</span><br><span class="line">      FETCH c1 INTO v_trade ;</span><br><span class="line">      EXIT WHEN c1%NOTFOUND;</span><br><span class="line">      DBMS_OUTPUT.PUT_LINE(to_char(v_trade.tradeDate,&apos;yyyy-mm-dd&apos;)||&apos;     &apos;||v_trade.tradeType||&apos;     &apos;||v_trade.cardID||&apos;     &apos;||v_trade.trademoney);</span><br><span class="line">  END LOOP;</span><br><span class="line">  CLOSE c1;</span><br><span class="line">END;</span><br><span class="line">BEGIN</span><br><span class="line"> usp_pagingDisplay(2,2);</span><br><span class="line">END;</span><br><span class="line">/*---- 5.打印对账单 ----*/</span><br><span class="line">--drop proc usp_CheckSheet</span><br><span class="line">CREATE OR REPLACE PROCEDURE usp_CheckSheet(</span><br><span class="line">  v_cardID varchar2,</span><br><span class="line">  v_date1 date:=NULL,</span><br><span class="line">  v_date2 date:=NULL)</span><br><span class="line">AS</span><br><span class="line">    v_custName varchar2(20);</span><br><span class="line">    v_curName varchar2(20);</span><br><span class="line">    v_savingName varchar2(20);</span><br><span class="line">    v_openDate date;</span><br><span class="line">  TYPE cursor_type IS REF CURSOR;</span><br><span class="line">  --声明一个游标变量</span><br><span class="line">   c1 CURSOR_TYPE;</span><br><span class="line">   v_trade tradeinfo%rowtype;</span><br><span class="line">   v_sqlStr varchar2(2000);</span><br><span class="line">BEGIN</span><br><span class="line">    SELECT c.curID, u.customerName,d.savingName ,c.openDate</span><br><span class="line">  INTO v_curName,v_custName,v_savingName, v_openDate</span><br><span class="line">    FROM cardInfo c inner join  userInfo u on c.customerID=u.customerID</span><br><span class="line">                  inner join deposit d on c.savingID = d.savingID</span><br><span class="line">    WHERE  cardID = v_cardID; --and u.customerName = user_name()</span><br><span class="line">    dbms_output.put_line(&apos;卡号：&apos; || v_cardID);</span><br><span class="line">    dbms_output.put_line(&apos;姓名:&apos;  || v_custName);</span><br><span class="line">    dbms_output.put_line(&apos;货币:&apos;  || v_curName);</span><br><span class="line">    dbms_output.put_line(&apos;存款类型：&apos;  || v_savingName);</span><br><span class="line">    dbms_output.put_line(&apos;开户日期：&apos;  || to_char(v_openDate,&apos;yyyy&quot;年&quot;mm&quot;月&quot;dd&quot;日&quot;&apos;));</span><br><span class="line">    dbms_output.put_line(&apos; &apos;);</span><br><span class="line">    dbms_output.put_line(&apos;--------------------------------------------------------------------&apos;);</span><br><span class="line">  dbms_output.put_line(&apos;交易日   &apos;||&apos;   类型  &apos;||&apos;   交易金额  &apos;||&apos;   备注&apos;);</span><br><span class="line">  v_sqlStr:=&apos;SELECT *</span><br><span class="line">        FROM tradeInfo</span><br><span class="line">        WHERE cardID=&apos;&apos;&apos;||v_cardID||&apos;&apos;&apos;&apos;;</span><br><span class="line">  IF v_date2 IS NOT NULL THEN</span><br><span class="line">      v_sqlStr:=v_sqlStr||&apos; AND tradeDate &lt;=to_date(&apos;&apos;&apos;||to_char(v_date2,&apos;yyyy-mm-dd&apos;)||&apos; 23:59:59&apos;||&apos;&apos;&apos;,&apos;&apos;yyyy-mm-dd hh24:mi:ss&apos;&apos;)&apos;;</span><br><span class="line">  END IF;</span><br><span class="line">  IF v_date1 IS NOT NULL THEN</span><br><span class="line">      v_sqlStr:=v_sqlStr||&apos; AND tradeDate &gt;=to_date(&apos;&apos;&apos;||to_char(v_date1,&apos;yyyy-mm-dd&apos;)||&apos; 00:00:00&apos;||&apos;&apos;&apos;,&apos;&apos;yyyy-mm-dd hh24:mi:ss&apos;&apos;)&apos;;       </span><br><span class="line">  END IF;</span><br><span class="line">  v_sqlStr:=v_sqlStr||&apos; ORDER BY tradeDate&apos;;</span><br><span class="line">  --dbms_output.put_line(v_sqlStr);</span><br><span class="line">  open c1 for v_sqlStr;</span><br><span class="line">  LOOP</span><br><span class="line">      FETCH c1 INTO v_trade ;</span><br><span class="line">      EXIT WHEN c1%NOTFOUND;  </span><br><span class="line">      DBMS_OUTPUT.PUT_LINE(to_char(v_trade.tradeDate,&apos;yyyy-mm-dd&apos;)||&apos;     &apos;||v_trade.tradeType||&apos;     &apos;||v_trade.tradeMoney||&apos;     &apos;||v_trade.remark);</span><br><span class="line">  END LOOP;</span><br><span class="line">  CLOSE c1;</span><br><span class="line">END;</span><br><span class="line">--调用</span><br><span class="line">begin</span><br><span class="line">  -- Test statements here</span><br><span class="line">  usp_CheckSheet(&apos;1010 3576 1212 1130&apos;,to_date(&apos;2012-12-01&apos;,&apos;yyyy-mm-dd&apos;),to_date(&apos;2013-11-01&apos;,&apos;yyyy-mm-dd&apos;));</span><br><span class="line">end;</span><br><span class="line">/*--6.查询、统计在指定时间段内没有发生交易的账户信息*/</span><br><span class="line">--drop proc usp_getWithoutTrade</span><br><span class="line">create or replace procedure usp_getWithoutTrade(</span><br><span class="line">  v_Num out number ,</span><br><span class="line">  v_Amount out number ,</span><br><span class="line">  v_date1 date := NULL,</span><br><span class="line">  v_date2 date := NULL)</span><br><span class="line">AS</span><br><span class="line"> v_sd date;</span><br><span class="line"> v_ed date;</span><br><span class="line">TYPE cursor_type IS REF CURSOR;</span><br><span class="line">c1 CURSOR_TYPE;</span><br><span class="line">v_cur userInfo%rowtype;</span><br><span class="line">BEGIN</span><br><span class="line">  IF v_date1 IS NULL THEN</span><br><span class="line">   v_sd:=trunc(sysdate,&apos;month&apos;);</span><br><span class="line">  END IF;</span><br><span class="line">  IF v_date2 IS NULL THEN</span><br><span class="line">     v_ed := sysdate;</span><br><span class="line">  END IF;</span><br><span class="line">  dbms_output.put_line(&apos;客户号   &apos;||&apos;  客户姓名&apos;||&apos;    身份证号&apos;||&apos;   电话&apos;||&apos;   地址&apos;);</span><br><span class="line">  dbms_output.put_line(&apos;---------------------------------------------------------------&apos;);</span><br><span class="line">  open c1 for SELECT distinct u.customerID,u.customerName,u.PID,u.telephone,address</span><br><span class="line">  FROM userInfo u</span><br><span class="line">  JOIN cardInfo c ON u.customerID = c.customerID</span><br><span class="line">  WHERE c.cardID NOT IN (SELECT cardID FROM tradeInfo WHERE tradeDate Between  v_sd and v_ed);</span><br><span class="line">  LOOP</span><br><span class="line">      FETCH c1 INTO v_cur ;</span><br><span class="line">      EXIT WHEN c1%NOTFOUND;</span><br><span class="line">      DBMS_OUTPUT.PUT_LINE(v_cur.customerID||&apos;     &apos;||v_cur.customerName||&apos;     &apos;||v_cur.PID||&apos;     &apos;||v_cur.telephone||&apos;   &apos;||v_cur.address);</span><br><span class="line">  END LOOP;</span><br><span class="line">  CLOSE c1;</span><br><span class="line">  SELECT COUNT(customerID),SUM(balance) into  v_Num,v_Amount</span><br><span class="line">  FROM cardInfo</span><br><span class="line">  WHERE cardID NOT IN (SELECT cardID FROM tradeInfo WHERE tradeDate Between v_sd and v_ed);</span><br><span class="line">end;</span><br><span class="line">--调用存储过程</span><br><span class="line">DECLARE </span><br><span class="line">  v_NUM number;</span><br><span class="line">  v_Amount number(18,2);</span><br><span class="line">  v_date1 date;</span><br><span class="line">  v_date2 date;</span><br><span class="line">begin</span><br><span class="line">  v_date1:= to_date(&apos;2009-1-1&apos;,&apos;yyyy-mm-dd&apos;);</span><br><span class="line">  v_date2:= sysdate;</span><br><span class="line">  usp_getWithoutTrade(v_NUM, v_Amount);--, @date1, @date2</span><br><span class="line">  dbms_output.put_line(&apos;统计未发生交易的客户&apos;);</span><br><span class="line">  dbms_output.put_line( &apos;---------------------------------------&apos;);</span><br><span class="line">  dbms_output.put_line( &apos;客户人数：&apos; || v_NUM || &apos;  客户总余额：&apos; || v_Amount);</span><br><span class="line">end;</span><br><span class="line">/*--7.统计银行卡交易量和交易额*/</span><br><span class="line">--drop proc usp_getTradeInfo</span><br><span class="line">create or replace procedure usp_getTradeInfo(</span><br><span class="line">  v_Num1 out number,</span><br><span class="line">  v_Amount1 out number,</span><br><span class="line">  v_Num2 out number,</span><br><span class="line">  v_Amount2  out number,</span><br><span class="line">  v_date1 date:=trunc(sysdate,&apos;year&apos;),</span><br><span class="line">  v_date2 date:=sysdate,</span><br><span class="line">  v_address varchar:= NULL)</span><br><span class="line">AS</span><br><span class="line">BEGIN</span><br><span class="line"> </span><br><span class="line">  IF v_address IS NULL THEN</span><br><span class="line">    SELECT COUNT(tradeMoney), SUM(tradeMoney) into v_num1,v_Amount1</span><br><span class="line">    FROM tradeInfo</span><br><span class="line">    WHERE tradeDate BETWEEN v_date1 AND v_date2 AND tradeType=&apos;存入&apos;;</span><br><span class="line">    SELECT COUNT(tradeMoney), SUM(tradeMoney) into v_num2,v_Amount2</span><br><span class="line">    FROM tradeInfo</span><br><span class="line">    WHERE tradeDate BETWEEN v_date1 AND v_date2 AND tradeType=&apos;支取&apos;;</span><br><span class="line">  ELSE</span><br><span class="line">    SELECT  COUNT(tradeMoney), SUM(tradeMoney) into v_num1,v_Amount1</span><br><span class="line">    FROM tradeInfo JOIN cardInfo ON tradeInfo.cardID = cardInfo.cardID</span><br><span class="line">           JOIN userInfo ON cardInfo.customerID = userInfo.customerID</span><br><span class="line">    WHERE tradeDate BETWEEN v_date1 AND v_date2 AND tradeType=&apos;存入&apos;</span><br><span class="line">        AND address Like &apos;%&apos;||v_address||&apos;%&apos;;</span><br><span class="line">    SELECT COUNT(tradeMoney), SUM(tradeMoney) into v_num2,v_Amount2</span><br><span class="line">    FROM tradeInfo JOIN cardInfo ON tradeInfo.cardID = cardInfo.cardID</span><br><span class="line">           JOIN userInfo ON cardInfo.customerID = userInfo.customerID</span><br><span class="line">    WHERE tradeDate BETWEEN v_date1 AND v_date2 AND tradeType=&apos;支取&apos;</span><br><span class="line">        AND address Like &apos;%&apos;||v_address||&apos;%&apos;;</span><br><span class="line">  END IF;</span><br><span class="line">  v_num1:=nvl(v_num1,0);</span><br><span class="line">  v_num2:=nvl(v_num2,0);</span><br><span class="line">  v_Amount1:=nvl(v_Amount1,0);</span><br><span class="line">  v_Amount2:=nvl(v_Amount2,0);</span><br><span class="line">end;</span><br><span class="line">--调用</span><br><span class="line">declare </span><br><span class="line">    v_CNT1 number;</span><br><span class="line">    v_Total1 number(18,2);</span><br><span class="line">    v_CNT2 number;</span><br><span class="line">    v_Total2 number(18,2);</span><br><span class="line">    v_date1 date;</span><br><span class="line">    v_date2 date;</span><br><span class="line">begin</span><br><span class="line">    v_date1 := to_date(&apos;2009-1-1&apos;,&apos;yyyy-mm-dd&apos;);</span><br><span class="line">    v_date2 := sysdate;</span><br><span class="line">    usp_getTradeInfo (v_CNT1, v_Total1, v_CNT2, v_Total2, v_date1,v_date2,&apos;北京海淀&apos;);--, &apos;北京&apos;;</span><br><span class="line">    dbms_output.put_line(&apos;统计银行卡交易量和交易额&apos;);</span><br><span class="line">    dbms_output.put_line(&apos;&apos;);</span><br><span class="line">    dbms_output.put_line(&apos;起始日期：&apos; || to_char(v_date1,&apos;yyyy-mm-dd&apos;) ||  &apos;  截止日期：&apos; || to_char(v_date2,&apos;yyyy-mm-dd&apos;));</span><br><span class="line">    dbms_output.put_line(&apos;-----------------------------------------------------------&apos;);</span><br><span class="line">    dbms_output.put_line(&apos;存入笔数：&apos; || v_CNT1 || &apos;  存入金额：&apos; ||v_Total1);</span><br><span class="line">    dbms_output.put_line( &apos;支取笔数：&apos; || v_CNT2|| &apos;  支取金额：&apos; ||v_Total2);</span><br><span class="line">    dbms_output.put_line(&apos;-----------------------------------------------------------&apos;);</span><br><span class="line">    dbms_output.put_line(&apos;发生笔数：&apos; || (v_CNT1+v_CNT2)|| &apos;  结余金额：&apos; || (v_Total1-v_Total2));</span><br><span class="line">end;</span><br><span class="line">/*复杂的业务逻辑*/</span><br><span class="line">--转帐的事务存储过程</span><br><span class="line">--  drop proc usp_tradefer</span><br><span class="line">create or replace procedure usp_tradefer (</span><br><span class="line">    v_card1 varchar2,</span><br><span class="line">    v_pwd varchar2,</span><br><span class="line">    v_card2 varchar2,</span><br><span class="line">    v_outmoney number)</span><br><span class="line">AS</span><br><span class="line">   v_date1 date:= sysdate;</span><br><span class="line">   v_date2 date:= sysdate;</span><br><span class="line">   </span><br><span class="line">   emp_20000 EXCEPTION;</span><br><span class="line">   PRAGMA EXCEPTION_INIT(emp_20000, -20000);</span><br><span class="line">   emp_20001 EXCEPTION;</span><br><span class="line">   PRAGMA EXCEPTION_INIT(emp_20001, -20001);</span><br><span class="line">BEGIN</span><br><span class="line">    commit;</span><br><span class="line">    dbms_output.put_line(&apos;开始转账，请稍后......&apos;);</span><br><span class="line">    usp_takeMoney(v_card1,v_outmoney ,&apos;支取&apos;,v_pwd);</span><br><span class="line">    usp_takeMoney(v_card2,v_outmoney ,&apos;存入&apos;);</span><br><span class="line">    commit;</span><br><span class="line">    dbms_output.put_line(&apos;转账成功！&apos;);</span><br><span class="line">    v_date2 := sysdate;</span><br><span class="line">    dbms_output.put_line(&apos;打印转出账户对账单&apos;);</span><br><span class="line">    dbms_output.put_line(&apos;-------------------&apos;);</span><br><span class="line">    usp_CheckSheet(v_card1,v_date1,v_date2);</span><br><span class="line">    dbms_output.put_line(&apos;打印转入账户对账单&apos;);</span><br><span class="line">    dbms_output.put_line( &apos;-------------------&apos;);</span><br><span class="line">    usp_CheckSheet(v_card2,v_date1,v_date2);</span><br><span class="line">EXCEPTION</span><br><span class="line">   WHEN emp_20000 THEN</span><br><span class="line">      DBMS_OUTPUT.PUT_LINE(&apos;交易失败！余额不足！转账失败！&apos;);</span><br><span class="line">      rollback;</span><br><span class="line">   WHEN emp_20001 THEN</span><br><span class="line">      DBMS_OUTPUT.PUT_LINE(&apos;卡号或密码错误! 转账失败！&apos;);</span><br><span class="line">      rollback;</span><br><span class="line">   WHEN OTHERS THEN</span><br><span class="line">      DBMS_OUTPUT.PUT_LINE(&apos;出现了其他异常错误,转账失败！&apos;);</span><br><span class="line">      rollback;</span><br><span class="line">END;</span><br><span class="line">--测试上述事务存储过程</span><br><span class="line">--从李四的帐户转帐2000到张三的帐户</span><br><span class="line">--同上一样,现实中的取款机依靠读卡器读出张三/李四的卡号,这里根据张三/李四的名字查出考号来模拟</span><br><span class="line">DECLARE</span><br><span class="line">   emp_20000 EXCEPTION;</span><br><span class="line">   PRAGMA EXCEPTION_INIT(emp_20000, -20000);</span><br><span class="line">   emp_20001 EXCEPTION;</span><br><span class="line">   PRAGMA EXCEPTION_INIT(emp_20001, -20001);</span><br><span class="line">   v_card1 char(19);</span><br><span class="line">   v_card2 char(19);</span><br><span class="line">BEGIN</span><br><span class="line">    select cardID into v_card1 </span><br><span class="line">    from cardInfo Inner Join userInfo ON cardInfo.customerID=userInfo.customerID </span><br><span class="line">    where customerName=&apos;李四&apos;;</span><br><span class="line">    select cardID into v_card2 </span><br><span class="line">    from cardInfo Inner Join userInfo ON cardInfo.customerID=userInfo.customerID </span><br><span class="line">    where customerName=&apos;张三&apos;;</span><br><span class="line">    usp_tradefer(v_card1,&apos;123123&apos;,v_card2,2000);</span><br><span class="line">EXCEPTION</span><br><span class="line">   WHEN emp_20000 THEN</span><br><span class="line">      DBMS_OUTPUT.PUT_LINE(&apos;交易失败！余额不足！转账失败！&apos;);</span><br><span class="line">   WHEN emp_20001 THEN</span><br><span class="line">      DBMS_OUTPUT.PUT_LINE(&apos;密码错误!转账失败！&apos;);</span><br><span class="line">   WHEN no_data_found THEN</span><br><span class="line">      DBMS_OUTPUT.PUT_LINE(&apos;用户名不存在!转账失败！&apos;);      </span><br><span class="line">   WHEN OTHERS THEN</span><br><span class="line">      DBMS_OUTPUT.PUT_LINE(&apos;出现了其他异常错误！&apos;);</span><br><span class="line">END;</span><br><span class="line">select * from vw_userInfo;</span><br><span class="line">select * from vw_cardInfo;</span><br><span class="line">select * from vw_tradeInfo;</span><br></pre></td></tr></table></figure>

    </div>
</article>


<div id="comments-template"></div>
<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
<script>
	if(!window.commentConfig) {
      window.commentConfig = {}
      window.commentConfig.title = 'SQL银行模拟语句整合'
    }
</script>

                </div>
                <aside class="col-md-4 gal-left" id="sidebar">
    <!-- 此为sidebar的搜索框, 非搜索结果页面 -->
<aside id="sidebar-search">
    <div class="search hidden-xs" data-aos="fade-up" data-aos-duration="2000">
        <form class="form-inline clearfix" id="search-form" method="get"
              action="/search/index.html">
            <input type="text" name="s" class="form-control" id="searchInput" placeholder="搜索文章~">
            <button class="btn btn-danger btn-gal" type="submit">
                <i class="fa fa-search"></i>
            </button>
        </form>
    </div>
</aside>
    <aside id="sidebar-author">
    <div class="panel panel-gal" data-aos="flip-right" data-aos-duration="3000">
        <div class="panel-heading" style="text-align: center">
            <i class="fa fa-quote-left"></i>
            宝全哥哥
            <i class="fa fa-quote-right"></i>
        </div>
        <div class="author-panel text-center">
            <img src="/imgs/avatar.jpg" width="140" height="140"
                 alt="个人头像" class="author-image">
            <p class="author-description"></p>
        </div>
    </div>
</aside>
    
    <aside id="sidebar-recent_comments">
    <div class="panel panel-gal recent hidden-xs" data-aos="fade-up" data-aos-duration="2000">
        <div class="panel-heading">
            <i class="fa fa-comments"></i>
            最新评论
            <i class="fa fa-times-circle panel-remove"></i>
            <i class="fa fa-chevron-circle-up panel-toggle"></i>
        </div>
        <ul class="list-group list-group-flush"></ul>
    </div>
</aside>
    
    <!-- 要配置好leancloud才能开启此小工具 -->
    
    <aside id="sidebar-hot_posts">
    <div class="panel panel-gal hot hidden-xs" data-aos="fade-up" data-aos-duration="2000">
        <div class="panel-heading">
            <i class="fa fa-fire"></i>
            最热文章
            <i class="fa fa-times-circle panel-remove"></i>
            <i class="fa fa-chevron-circle-up panel-toggle"></i>
        </div>
        <ul class="list-group list-group-flush"></ul>
    </div>
</aside>
    
    
    <aside id="sidebar-recent_posts">
    <div class="panel panel-gal recent hidden-xs" data-aos="fade-up" data-aos-duration="2000">
        <div class="panel-heading">
            <i class="fa fa-refresh"></i>
            近期文章
            <i class="fa fa-times-circle panel-remove"></i>
            <i class="fa fa-chevron-circle-up panel-toggle"></i>
        </div>
        <ul class="list-group list-group-flush">
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/08/08/IDE基础-Eclipse/">IDE基础-Eclipse</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/08/08/Linux基础操作/">Linux基础操作文档</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/08/05/volatile基础/">volatile基础</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/07/20/Spring Cloud基础使用/">Spring Cloud基础使用</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/07/15/SQL银行模拟语句整合/">SQL银行模拟语句整合</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/07/13/SpringBoot基础原理/">Spring Boot基础使用</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/07/12/实用工具类集合/">实用工具类集合</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/07/08/Zookeeper与Dubbo基础原理/">Zookeeper与Dubbo基础原理</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/07/08/工具类集合分析--接口/">工具类集合分析--接口</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/07/06/Solr基础原理/">Solr基础原理</a>
                </span>
            </li>
            
        </ul>
    </div>
</aside>
    
    
    <aside id="sidebar-rand_posts">
    <div class="panel panel-gal recent hidden-xs" data-aos="fade-up" data-aos-duration="2000">
        <div class="panel-heading">
            <i class="fa fa-refresh"></i>
            随机文章
            <i class="fa fa-times-circle panel-remove"></i>
            <i class="fa fa-chevron-circle-up panel-toggle"></i>
        </div>
        <ul class="list-group list-group-flush">
            
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2017/05/06/IDEA整合Git基础/">IDEA整合Git基础</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/08/08/IDE基础-Eclipse/">IDE基础-Eclipse</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/08/08/Linux基础操作/">Linux基础操作文档</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/07/20/Spring Cloud基础使用/">Spring Cloud基础使用</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/03/23/javaSE-集合/">javaSE-集合</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/07/03/hello-world/">Hello World</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/07/08/工具类集合分析--接口/">工具类集合分析--接口</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/07/12/实用工具类集合/">实用工具类集合</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/05/15/Spring-MVC基础原理/">Spring-MVC基础原理</a>
                </span>
            </li>
            
            <li class="list-group-item">
                <span class="post-title">
                    <a href="/2018/05/04/Redis基础原理/">Redis基础原理</a>
                </span>
            </li>
            
        </ul>
    </div>
</aside>
    
    
    <aside id="gal-sets">
        <div class="panel panel-gal hidden-xs" data-aos="fade-up" data-aos-duration="2000">
            <ul class="nav nav-pills pills-gal">
                <li class="">
                    <a href="/2018/07/15/SQL银行模拟语句整合/index.html#sidebar-tags" data-toggle="tab" id="tags-tab">热门标签</a>
                </li>
                <li class="">
                    <a href="/2018/07/15/SQL银行模拟语句整合/index.html#sidebar-friend-links" data-toggle="tab" id="friend-links-tab">友情链接</a>
                </li>
                <li class="">
                    <a href="/2018/07/15/SQL银行模拟语句整合/index.html#sidebar-links" data-toggle="tab" id="links-tab">个人链接</a>
                </li>
            </ul>
            <div class="tab-content">
                <div class="cloud-tags tab-pane nav bs-sidenav fade" id="sidebar-tags">
    
</div>
                <div class="friend-links tab-pane nav bs-sidenav fade" id="sidebar-friend-links">
    
    <li>
        <a href="http://kdays.net/days/" target="_blank">KDays Forum</a>
    </li>
    
    <li>
        <a href="http://www.gal123.com/" target="_blank">绅士导航♂</a>
    </li>
    
    <li>
        <a href="http://www.moe123.com/" target="_blank">萌导航</a>
    </li>
    
</div>
                <div class="links tab-pane nav bs-sidenav fade" id="sidebar-links">
    
    <li>
        <a href="https://github.com/dony15" target="_blank">Github</a>
    </li>
    
</div>
            </div>
        </div>
    </aside>
    
</aside>
            </div>
        </div>
    </div>
    <footer id="gal-footer">
    <div class="container">
        Copyright © 2018 宝全哥哥 Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>.&nbsp;Theme by <a href="https://github.com/ZEROKISEKI" target="_blank">AONOSORA</a>
    </div>
</footer>

<!-- 回到顶端 -->
<div id="gal-gotop">
    <i class="fa fa-angle-up"></i>
</div>

<!--page counter part统计-->
<script>
function addCount (Counter) {
        url=$('.article-date').attr('href').trim();
        title = $('.article-title').text().trim();
        var query=new AV.Query(Counter);
        //use url as unique idnetfication
        query.equalTo("url",url);
        query.find({
            success: function(results){
                if(results.length>0)
                {
                    var counter=results[0];
                    counter.fetchWhenSave(true); //get recent result
                    counter.increment("time");
                    counter.save();
                }
                else
                {
                    var newcounter=new Counter();
                    newcounter.set("title",title);
                    newcounter.set("url",url);
                    newcounter.set("time",1);
                    newcounter.save(null,{
                        success: function(newcounter){
                        //alert('New object created');
                        },
                        error: function(newcounter,error){
                        alert('Failed to create');
                        }
                        });
                }
            },
            error: function(error){
                //find null is not a error
                alert('Error:'+error.code+" "+error.message);
            }
        });
}
$(function(){
        var Counter=AV.Object.extend("Counter");
        //only increse visit counting when intering a page
        if ($('.article-title').length == 1)
           addCount(Counter);
        var query=new AV.Query(Counter);
        query.descending("time");
        // the sum of popular posts
        query.limit(10); 
        query.find({
            success: function(results){
                    for(var i=0;i<results.length;i++)    
                    {
                        var counter=results[i];
                        title=counter.get("title");
                        url=counter.get("url");
                        time=counter.get("time");
                        // add to the popularlist widget
                        showcontent=title+" ("+time+")";
                        //notice the "" in href
                        $('.popularlist').append('<li><a href="'+url+'">'+showcontent+'</a></li>');
                    }
                },
            error: function(error){
                alert("Error:"+error.code+" "+error.message);
            }
            }
        )
        });
</script>
</body>
<script src="/js/activate-power-mode.js"></script>
<script>

    // 配置highslide
	hs.graphicsDir = '/js/highslide/graphics/'
    hs.outlineType = "rounded-white";
    hs.dimmingOpacity = 0.8;
    hs.outlineWhileAnimating = true;
    hs.showCredits = false;
    hs.captionEval = "this.thumb.alt";
    hs.numberPosition = "caption";
    hs.align = "center";
    hs.transitions = ["expand", "crossfade"];
    hs.lang.number = '共%2张图, 当前是第%1张';
    hs.addSlideshow({
      interval: 5000,
      repeat: true,
      useControls: true,
      fixedControls: "fit",
      overlayOptions: {
        opacity: 0.75,
        position: "bottom center",
        hideOnMouseOut: true
      }
    })

    // 初始化aos
    AOS.init({
      duration: 1000,
      delay: 0,
      easing: 'ease-out-back'
    });

</script>
<script>
	POWERMODE.colorful = 'true';    // make power mode colorful
	POWERMODE.shake = 'true';       // turn off shake
	// TODO 这里根据具体情况修改
	document.body.addEventListener('input', POWERMODE);
</script>
<script>
    window.slideConfig = {
      prefix: '/imgs/slide/background',
      ext: 'jpg',
      maxCount: '8'
    }
</script>
<script src="/js/hs.js"></script>
<script src="/js/blog.js"></script>

<script src="/js/oni.js"></script>


<script>
    window.hot_posts_count = '10'
    // window.use_leancloud = 'true'
</script>
<script src="/js/comment/leancloud.js"></script>


<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
<script>
    if(window.commentConfig) {
      window.commentConfig.id = 'Sun Jul 15 2018 00:00:00 GMT+0800'
      window.commentConfig.owner = 'dony15'
      window.commentConfig.repo = 'reply.github.io'
      window.commentConfig.client_id = '3e620f638731b84942ed'
      window.commentConfig.client_secret = '2a6265b3e1a280bf5d9b6c9d5e1c96c1915a778e'
      window.commentConfig.redirect_uri = ''
    } else {
      window.commentConfig = {
      	id: 'Sun Jul 15 2018 00:00:00 GMT+0800',
        owner: 'dony15',
        repo: 'reply.github.io',
        client_id: '3e620f638731b84942ed',
        client_secret: '2a6265b3e1a280bf5d9b6c9d5e1c96c1915a778e',
        redirect_uri: ''
      }
    }
</script>
<script src="/js/comment/gitment.js"></script>

</html>